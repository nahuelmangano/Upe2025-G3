<mat-toolbar class="panel" color="primary">
  <mat-toolbar-row>
    <span class="color-primario mr titulo">SALUD - UPE</span>
    <button mat-icon-button (click)="toggleSidenav()">
      <mat-icon class="barra">menu</mat-icon>
    </button>
    <span class="toolbar-spacer"></span>
    <div class="medico-pill">
      <span class="medico-pill__label">M&eacute;dico</span>
      <span class="medico-pill__name">{{ medicoNombre }}</span>
    </div>
    <button mat-stroked-button color="primary" class="logout-btn" (click)="logout()">
      <mat-icon>logout</mat-icon>
      Cerrar sesi&oacute;n
    </button>
  </mat-toolbar-row>
</mat-toolbar>

<mat-sidenav-container class="test">
  <mat-sidenav #sidenav [opened]="isExpanded" class="contenedor-marco" [mode]="isDesktop ? 'side' : 'over'"
    [fixedInViewport]="!isDesktop" [fixedTopGap]="isDesktop ? 64 : 56" (closedStart)="isExpanded=false"
    (openedStart)="isExpanded=true">
    <ng-container *ngIf="isPacienteCtx; else defaultNav">
      <div class="side-panel">
        <div class="side-panel__actions">
          <button class="back-link" type="button" (click)="salirDelPacienteContexto()">
            <span class="material-icons">arrow_back</span>
            Volver
          </button>
        </div>

        <div class="patient-card">
          <div class="avatar" aria-hidden="true">{{ pacienteIniciales || 'P' }}</div>
          <div class="patient-name">{{ pacienteNombre || 'Nombre del paciente' }}</div>
          <div class="patient-stats">
            <div class="stat">
              <span class="label">EDAD</span>
              <span class="value">{{ pacienteEdad ?? '--' }}</span>
            </div>
            <div class="stat">
              <span class="label">DNI</span>
              <span class="value">{{ pacienteDni || '--' }}</span>
            </div>
          </div>
        </div>

        <nav class="nav">

          <a class="nav-link" [routerLink]="['/medico', 'pacientes']" routerLinkActive="active"
            [routerLinkActiveOptions]="{ exact: true }" (click)="onNavClick(sidenav)"
            [style.display]="!isPacienteCtx ? '' : 'none'"><span class="material-icons">person</span>Pacientes</a>

          <a class="nav-link" [routerLink]="pacienteRoute('resumen')" routerLinkActive="active"
            [routerLinkActiveOptions]="{ exact: true }" (click)="onNavClick(sidenav)"
            [style.display]="isPacienteCtx ? '' : 'none'"><span class="material-icons">dashboard</span>Resumen</a>

          <a class="nav-link" [routerLink]="pacienteRoute('evoluciones')" routerLinkActive="active"
            [routerLinkActiveOptions]="{ exact: true }" (click)="onNavClick(sidenav)"
            [style.display]="isPacienteCtx ? '' : 'none'"><span class="material-icons">timeline</span>Evoluciones</a>

          <a class="nav-link" [routerLink]="pacienteRoute('archivos')" routerLinkActive="active"
            [routerLinkActiveOptions]="{ exact: true }" (click)="onNavClick(sidenav)"
            [style.display]="isPacienteCtx ? '' : 'none'"><span class="material-icons">description</span>Documentos y
            estudios</a>

          <a class="nav-link" [routerLink]="['/medico', 'mis-plantillas']" routerLinkActive="active"
            [routerLinkActiveOptions]="{ exact: true }" (click)="onNavClick(sidenav)"><span
              class="material-icons">content_copy</span>Plantillas</a>
        </nav>
      </div>
    </ng-container>

    <ng-template #defaultNav>
      <nav class="nav default-nav">

        <a class="nav-link" [routerLink]="['/medico', 'pacientes']" routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: true }" (click)="onNavClick(sidenav)"
          [style.display]="!isPacienteCtx ? '' : 'none'"><span class="material-icons">person</span>Pacientes</a>

        <a class="nav-link" [routerLink]="pacienteRoute('resumen')" routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: true }" (click)="onNavClick(sidenav)"
          [style.display]="isPacienteCtx ? '' : 'none'"><span class="material-icons">dashboard</span>Resumen</a>

        <a class="nav-link" [routerLink]="pacienteRoute('evoluciones')" routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: true }" (click)="onNavClick(sidenav)"
          [style.display]="isPacienteCtx ? '' : 'none'"><span class="material-icons">timeline</span>Evoluciones</a>

        <a class="nav-link" [routerLink]="pacienteRoute('archivos')" routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: true }" (click)="onNavClick(sidenav)"
          [style.display]="isPacienteCtx ? '' : 'none'"><span class="material-icons">description</span>Documentos y
          estudios</a>

        <a class="nav-link" [routerLink]="['/medico', 'mis-plantillas']" routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: true }" (click)="onNavClick(sidenav)"><span
            class="material-icons">content_copy</span>Plantillas</a>

      </nav>
    </ng-template>

  </mat-sidenav>

  <mat-sidenav-content>
    <div class="layout-content">
      <router-outlet></router-outlet>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>

