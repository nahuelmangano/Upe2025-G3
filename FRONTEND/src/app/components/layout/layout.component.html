<mat-toolbar class="panel" color="primary">
  <mat-toolbar-row>
    <span class="color-primario mr titulo">SALUD - UPE</span>
    <button mat-icon-button (click)="toggleSidenav()">
      <mat-icon class="barra">menu</mat-icon>
    </button>
    <span class="toolbar-spacer"></span>
    <button mat-stroked-button color="primary" class="logout-btn" (click)="logout()">
      <mat-icon>logout</mat-icon>
      Cerrar sesión
    </button>
  </mat-toolbar-row>
</mat-toolbar>

<mat-sidenav-container class="test">
  <mat-sidenav #sidenav [opened]="isExpanded" class="contenedor-marco" [mode]="isDesktop ? 'side' : 'over'"
    [fixedInViewport]="!isDesktop" [fixedTopGap]="isDesktop ? 64 : 56" (closedStart)="isExpanded=false"
    (openedStart)="isExpanded=true">
    <ng-container *ngIf="isPacienteCtx; else defaultNav">
      <div class="side-panel">
        <div class="patient-card">
          <div class="avatar" aria-hidden="true">{{ pacienteIniciales || 'P' }}</div>
          <div class="patient-name">{{ pacienteNombre || 'Nombre del paciente' }}</div>
          <div class="actions">
            <button class="btn-outline light" type="button" (click)="logout()"><span class="material-icons">
                logout
              </span></button>
            <button class="btn-outline light" type="button">Datos</button>
          </div>
          <dl class="patient-meta">
            <div>
              <dt>Edad</dt>
              <dd>{{ pacienteEdad ?? '—' }}</dd>
            </div>
            <div>
              <dt>nro HC</dt>
              <dd>{{ pacienteHC || '—' }}</dd>
            </div>
            <div class="full">
              <dt>DNI</dt>
              <dd>{{ pacienteDni || '—' }}</dd>
            </div>
          </dl>
        </div>

        <nav class="nav">
          <span class="nav-link disabled"><span class="material-icons">dashboard</span>Resumen</span>
          <span class="nav-link disabled"><span class="material-icons">assignment</span>Indicaciones</span>
          <a class="nav-link" [routerLink]="pacienteRoute('problemas')" routerLinkActive="active"
            [routerLinkActiveOptions]="{ exact: true }" (click)="onNavClick(sidenav)"><span class="material-icons">medical_information</span> Problemas</a>
          <a class="nav-link" [routerLink]="pacienteRoute('evoluciones')" routerLinkActive="active"
            [routerLinkActiveOptions]="{ exact: true }" (click)="onNavClick(sidenav)"><span class="material-icons">timeline</span>Evoluciones</a>
          <span class="nav-link disabled"><span class="material-icons">description</span>Documentos y estudios</span>
          <a class="nav-link" [routerLink]="['/pages', 'mis-plantillas']" routerLinkActive="active"
            [routerLinkActiveOptions]="{ exact: true }" (click)="onNavClick(sidenav)"><span class="material-icons">content_copy</span>Plantillas</a>
        </nav>
      </div>
    </ng-container>

    <ng-template #defaultNav>
      <mat-nav-list class="default-nav">
        <mat-list-item>
          <a routerLink="/pages/usuario" routerLinkActive="active" class="basic-link" (click)="onNavClick(sidenav)"
            [routerLinkActiveOptions]="{ exact: true }">
            <mat-icon class="icono-usuario">group</mat-icon>
            <span>Usuarios</span>
          </a>
        </mat-list-item>
        <mat-list-item>
          <a routerLink="/pages/mis-plantillas" class="basic-link" (click)="onNavClick(sidenav)">
            <mat-icon class="icono-usuario">description</mat-icon>
            <span>Plantillas</span>
          </a>
        </mat-list-item>
      </mat-nav-list>
    </ng-template>
  </mat-sidenav>

  <mat-sidenav-content>
    <div class="layout-content">
      <router-outlet></router-outlet>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
